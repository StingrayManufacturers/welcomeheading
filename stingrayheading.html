<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Welcome</title>
  <style>
    :root{
      /* Cursor position (updated by JS) */
      --mx: 50%;
      --my: 50%;

      /* Blue palette (compat-friendly) */
      --b0: #001b4d; /* deep */
      --b1: #002c73; /* brand base */
      --b2: #004aae; /* royal */
      --b3: #0070d1; /* bright accent */

      --text:#ffffff;
      --shadow: 0 2px 6px rgba(0,0,0,0.65);

      /* Responsive rhythm */
      --space-xs: clamp(6px, 0.8vw, 10px);
      --space-sm: clamp(10px, 1.2vw, 14px);
      --space-md: clamp(16px, 2vw, 24px);
      --space-lg: clamp(20px, 3vw, 36px);
      --radius: 12px;
      --control-h: clamp(38px, 5.2vw, 44px);
      --input-w: min(320px, 70vw);
    }

    html, body { height:100%; }
    body{
      margin:0;
      /* svh improves mobile viewport stability; fallback to vh if not supported */
      min-height: 100svh;
      min-height: 100vh;
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol", sans-serif;
      display:grid;
      place-items:center;
      padding: var(--space-lg);

      /* Interactive multi-gradient background with cursor-follow glow */
      background:
        /* glow 1 (cursor) */
        radial-gradient(500px circle at var(--mx) var(--my),
          rgba(0,112,209,0.70) 0%,
          rgba(0,74,174,0.55) 35%,
          rgba(0,0,0,0.00) 60%),
        /* glow 2 (slight vertical offset) */
        radial-gradient(900px circle at var(--mx) calc((var(--my) + 14%)),
          rgba(0,74,174,0.45) 0%,
          rgba(0,44,115,0.35) 45%,
          rgba(0,0,0,0.00) 80%),
        /* glow 3 (slight diagonal offset) */
        radial-gradient(1200px circle at calc((var(--mx) + 12%)) calc((var(--my) - 8%)),
          rgba(0,44,115,0.35) 0%,
          rgba(0,0,0,0.00) 60%),
        /* base gradient */
        linear-gradient(135deg, var(--b0) 0%, var(--b1) 40%, var(--b2) 70%, var(--b0) 100%);
      background-repeat: no-repeat;
      background-size: cover;
      box-shadow: inset 0 0 180px rgba(0,0,0,0.25);
    }

    .wrap{
      width:100%;
      max-width: min(1000px, 92vw);
      text-align:center;
    }

    /* Heading row with inline name + pencil */
    h1{
      margin:0 0 var(--space-sm) 0;
      font-size: clamp(28px, 6vw, 56px);
      line-height:1.1;
      letter-spacing: .2px;
      text-shadow: 0 1px 0 #000, 0 2px 0 #000, 0 3px 10px rgba(0,0,0,.5);
      font-weight:800;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: clamp(6px, 1vw, 10px);
      flex-wrap: wrap;
    }
    .name-inline{
      font-weight:800;
      text-decoration:none; /* no underline */
      border:none;
    }

    /* Pencil icon (small, inline, hover-reveal on desktop) */
    .pencil-btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width: clamp(22px, 3.4vw, 26px);
      height: clamp(22px, 3.4vw, 26px);
      border-radius: 6px;
      cursor:pointer;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.25);
      padding:0;
      transition: opacity .18s ease, visibility .18s ease, background .18s ease, transform .12s ease;
    }
    .pencil-btn:hover{ background: rgba(255,255,255,0.18); transform: translateY(-1px); }

    .pencil-icon{
      width: clamp(12px, 1.8vw, 14px);
      height: clamp(12px, 1.8vw, 14px);
      display:inline-block;
      background: linear-gradient(135deg, #ffd54f 0 60%, #c49000 60% 100%);
      transform: rotate(45deg);
      border-radius: 2px 2px 2px 0;
      position: relative;
      box-shadow: 0 0 0 1px rgba(0,0,0,.4) inset;
    }
    .pencil-icon::after{
      content:"";
      position:absolute;
      right:-3px; top:calc(50% - 2px);
      width: clamp(5px, 1vw, 6px);
      height: clamp(5px, 1vw, 6px);
      background:#ddd;
      border-radius:1px;
      box-shadow: 0 0 0 1px rgba(0,0,0,.3) inset;
    }

    /* Hover-behavior:
       - On devices that support hover: hide pencil until hovering near the name.
       - On touch-only devices: show pencil (no hover).
    */
    @media (hover:hover){
      .pencil-btn{ opacity:0; visibility:hidden; }
      .name-wrap:hover .pencil-btn{ opacity:1; visibility:visible; }
    }
    @media (hover:none){
      .pencil-btn{ opacity:1; visibility:visible; }
    }

    .sub{
      font-size: clamp(16px, 2.6vw, 22px);
      margin:0 0 var(--space-md) 0;
      text-shadow: var(--shadow);
      opacity:.98;
    }

    /* Add-your-name editor (appears when editing/first visit) */
    .name-editor{
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      background: rgba(255,255,255,0.08);
      padding: var(--space-xs) var(--space-sm);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      flex-wrap: wrap; /* allow wrap on small screens */
    }
    .name-editor input{
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.25);
      color: #fff;
      padding: 0 var(--space-sm);
      border-radius: 8px;
      outline: none;
      width: var(--input-w);
      height: var(--control-h);
      font-size: clamp(14px, 2.4vw, 16px);
    }
    .name-editor button{
      background: #ffffff;
      color: #002C73;
      border: none;
      padding: 0 var(--space-md);
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      height: var(--control-h);
      font-size: clamp(14px, 2.4vw, 16px);
    }
    .name-editor button:hover{ filter: brightness(.92); }

    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip: rect(0,0,1px,1px); white-space:nowrap; border:0;
    }

    @media (prefers-reduced-motion: no-preference){
      .fade-in{ animation: fade .5s ease-out both; }
      @keyframes fade{ from{ opacity:0; transform: translateY(8px) } to{ opacity:1; transform: translateY(0) } }
    }

    /* Reduced motion: freeze glow center */
    @media (prefers-reduced-motion: reduce){
      :root{ --mx:50%; --my:45%; }
    }

    /* ====== Small screens (phones) ====== */
    @media (max-width: 480px){
      .wrap{ max-width: 96vw; }
      h1{ gap: 6px; }
    }

    /* ====== Large displays / TVs ====== */
    @media (min-width: 1400px){
      .wrap{ max-width: 1100px; }
      .name-editor{ gap: 10px; }
      .name-editor input{ width: min(420px, 50vw); }
    }
  </style>
</head>
<body>
  <main class="wrap fade-in" role="main" aria-live="polite">
    <h1 class="name-wrap">
      <span>Welcome</span>
      <span id="userName" class="name-inline">User</span>
      <!-- Pencil icon inline (small). Hidden until hover on desktop; visible on touch -->
      <button id="editBtn" class="pencil-btn" type="button" aria-label="Edit your name" title="Edit your name">
        <span class="pencil-icon" aria-hidden="true"></span>
      </button>
    </h1>

    <p class="sub">What do you need help with today?</p>

    <!-- Add your name (shown on first visit or when editing) -->
    <div id="editor" class="name-editor" aria-label="Add your name section" style="display:none">
      <label class="sr-only" for="nameInput">Your name</label>
      <input id="nameInput" type="text" placeholder="Add your name" inputmode="text" autocomplete="name" />
      <button id="saveBtn" type="button">Save</button>
    </div>
  </main>

  <script>
    // ===== Name editor (with persistence) =====
    (function(){
      const userNameEl = document.getElementById('userName');
      const editorEl = document.getElementById('editor');
      const inputEl  = document.getElementById('nameInput');
      const saveBtn  = document.getElementById('saveBtn');
      const editBtn  = document.getElementById('editBtn');

      function setName(name){
        if(!name) return;
        userNameEl.textContent = name;
      }
      function showEditor(show){
        editorEl.style.display = show ? 'inline-flex' : 'none';
        // Keep the pencil in DOM for hover targeting; hide visually while editing
        editBtn.style.visibility = show ? 'hidden' : 'visible';
        if(show){
          inputEl.value = (userNameEl.textContent || '').trim();
          setTimeout(()=>{ inputEl.focus(); inputEl.select(); }, 0);
        }
      }

      // Load saved name (if any) and decide initial UI
      try{
        const saved = localStorage.getItem('displayName');
        if(saved){
          setName(saved);
          showEditor(false);      // saved: editor hidden, pencil hover-ready
        } else {
          showEditor(true);       // no saved: show editor immediately
        }
      }catch(e){
        showEditor(true);
      }

      function save(){
        const name = (inputEl.value || '').trim();
        if(!name) return;
        setName(name);
        try{ localStorage.setItem('displayName', name); }catch(e){}
        showEditor(false);        // hide editor after save
      }

      saveBtn.addEventListener('click', save);
      inputEl.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') save(); });
      editBtn.addEventListener('click', ()=> showEditor(true));
    })();

    // ===== Interactive gradient: cursor-following glow =====
    (function () {
      const r = document.documentElement;
      const body = document.body;
      let raf = null;
      let targetX = 0.5, targetY = 0.45; // normalized
      let animX = targetX, animY = targetY;

      const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;

      function tick() {
        const k = 0.18; // easing
        animX += (targetX - animX) * k;
        animY += (targetY - animY) * k;
        r.style.setProperty('--mx', (animX * 100).toFixed(3) + '%');
        r.style.setProperty('--my', (animY * 100).toFixed(3) + '%');
        raf = requestAnimationFrame(tick);
      }

      function setTargetFromClient(x, y) {
        const w = window.innerWidth || body.clientWidth || 1;
        const h = window.innerHeight || body.clientHeight || 1;
        targetX = Math.min(1, Math.max(0, x / w));
        targetY = Math.min(1, Math.max(0, y / h));
      }

      function startIfNeeded() {
        if (raf === null && !reduce) raf = requestAnimationFrame(tick);
      }

      window.addEventListener('mousemove', (e) => {
        setTargetFromClient(e.clientX, e.clientY);
        startIfNeeded();
      }, { passive: true });

      window.addEventListener('touchmove', (e) => {
        const t = e.touches && e.touches[0];
        if (!t) return;
        setTargetFromClient(t.clientX, t.clientY);
        startIfNeeded();
      }, { passive: true });

      // Nice initial position
      if (!reduce) {
        const cx = (window.innerWidth || 1) / 2;
        const cy = (window.innerHeight || 1) * 0.45;
        setTargetFromClient(cx, cy);
        startIfNeeded();
      } else {
        r.style.setProperty('--mx', '50%');
        r.style.setProperty('--my', '45%');
      }
    })();
  </script>
</body>

</html>
